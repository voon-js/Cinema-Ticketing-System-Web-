@model IEnumerable<CinemaTicketingSystem.Models.ConcessionOrder>

@{
    ViewData["Title"] = "My Concession Orders";
}

<div class="container py-4">
    <h2 class="mb-4">My Concession Orders</h2>

    @if (!Model.Any())
    {
        <div class="alert alert-info">
            <h5><i class="fas fa-info-circle me-2"></i>No orders found</h5>
            <p class="mb-0">You haven't placed any concession orders yet.</p>
        </div>

        <div class="text-center mt-4">
            <a asp-controller="Movies" asp-action="Index" class="btn btn-primary">
                <i class="fas fa-film me-2"></i>Browse Movies
            </a>
            <a asp-controller="Booking" asp-action="SelectMovie" class="btn btn-outline-primary">
                <i class="fas fa-ticket-alt me-2"></i>Book Tickets
            </a>
        </div>
    }
    else
    {
        <div class="row">
            @foreach (var order in Model)
            {
                <div class="col-lg-6 mb-4">
                    <div class="card h-100">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="mb-0">Order #@order.ConcessionOrderId</h6>
                            <span class="badge bg-info">@order.Status</span>
                        </div>
                        <div class="card-body">
                            <p class="card-text">
                                <strong>Date:</strong> @order.OrderDate.ToString("f")<br>
                                <strong>Total:</strong> <span class="text-success fw-bold">@order.TotalAmount.ToString("C")</span>
                            </p>

                            @if (order.Booking?.Showtime != null)
                            {
                                <hr>
                                <p class="card-text">
                                    <strong>Movie:</strong> @order.Booking.Showtime.Movie?.Title<br>
                                    <strong>Showtime:</strong> @order.Booking.Showtime.StartTime.ToString("f")
                                </p>
                            }

                            <div class="mt-3">
                                <a asp-action="OrderConfirmation" asp-route-orderId="@order.ConcessionOrderId"
                                   class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye me-1"></i>View Details
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        <div class="mt-4">
            <a asp-controller="Booking" asp-action="MyBookings" class="btn btn-outline-secondary">
                <i class="fas fa-arrow-left me-2"></i>Back to My Bookings
            </a>
        </div>
    }
</div>

@section Styles {
    <style>
        .card {
            transition: transform 0.2s;
            box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.1);
        }

        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }

        .badge {
            font-size: 0.75rem;
        }
    </style>
}